<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="STATE" height="2780px" preserveAspectRatio="none" style="width:702px;height:2780px;background:#FEFEFE;" version="1.1" viewBox="0 0 702 2780" width="702px" zoomAndPan="magnify"><title>fMRI Pipeline - State Machine</title><defs/><g><rect fill="#FEFEFE" height="2780" style="stroke:none;stroke-width:1;" width="702" x="0" y="0"/><g class="title" data-source-line="4"><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="366.5664" x="163.3354" y="35.4209">fMRI Pipeline - State Machine</text></g><path d="M222.27,154.6094 L423.6276,154.6094 A12.5,12.5 0 0 1 436.1276,167.1094 L436.1276,180.9063 L209.77,180.9063 L209.77,167.1094 A12.5,12.5 0 0 1 222.27,154.6094" fill="#FFFFFF"/><path d="M209.77,180.9063 L436.1276,180.9063 L436.1276,502.4063 A12.5,12.5 0 0 1 423.6276,514.9063 L222.27,514.9063 A12.5,12.5 0 0 1 209.77,502.4063 L209.77,180.9063" fill="#FFFFFF"/><rect fill="none" height="360.2969" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="226.3576" x="209.77" y="154.6094"/><line style="stroke:#000000;stroke-width:1;" x1="209.77" x2="436.1276" y1="180.9063" y2="180.9063"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="67.4775" x="289.21" y="172.6045">Initialized</text><ellipse cx="297.8" cy="201.9063" fill="#FFFFFF" rx="10" ry="10" style="stroke:#000000;stroke-width:1;"/><g><rect fill="#FFFFFF" height="50" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="116.25" x="239.67" y="248.9063"/><line style="stroke:#000000;stroke-width:1;" x1="239.67" x2="355.92" y1="275.2031" y2="275.2031"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="96.25" x="249.67" y="266.9014">ConfigLoaded</text></g><g><rect fill="#FFFFFF" height="50" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="116.5371" x="239.53" y="351.9063"/><line style="stroke:#000000;stroke-width:1;" x1="239.53" x2="356.0671" y1="378.2031" y2="378.2031"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="96.5371" x="249.53" y="369.9014">LoggingSetup</text></g><g><rect fill="#FFFFFF" height="50" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="152.0566" x="221.77" y="454.9063"/><line style="stroke:#000000;stroke-width:1;" x1="221.77" x2="373.8266" y1="481.2031" y2="481.2031"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="132.0566" x="231.77" y="472.9014">DirectoriesCreated</text></g><!--link *start*Initialized to ConfigLoaded--><g class="link" data-entity-1="ent0004" data-entity-2="ent0005" data-link-type="dependency" data-source-line="9" id="lnk6"><path d="M297.8,212.3463 C297.8,221.6063 297.8,230.0963 297.8,242.5863" fill="none" id="*start*Initialized-to-ConfigLoaded" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="297.8,248.5863,301.8,239.5863,297.8,243.5863,293.8,239.5863,297.8,248.5863" style="stroke:#000000;stroke-width:1;"/></g><!--link ConfigLoaded to LoggingSetup--><g class="link" data-entity-1="ent0005" data-entity-2="ent0007" data-link-type="dependency" data-source-line="10" id="lnk8"><path d="M297.8,299.3563 C297.8,315.2363 297.8,329.8463 297.8,345.6863" fill="none" id="ConfigLoaded-to-LoggingSetup" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="297.8,351.6863,301.8,342.6863,297.8,346.6863,293.8,342.6863,297.8,351.6863" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101.1753" x="298.8" y="329.9731">setup_logging()</text></g><!--link LoggingSetup to DirectoriesCreated--><g class="link" data-entity-1="ent0007" data-entity-2="ent0009" data-link-type="dependency" data-source-line="11" id="lnk10"><path d="M297.8,402.3563 C297.8,418.2363 297.8,432.8463 297.8,448.6863" fill="none" id="LoggingSetup-to-DirectoriesCreated" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="297.8,454.6863,301.8,445.6863,297.8,449.6863,293.8,445.6863,297.8,454.6863" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.3276" x="298.8" y="432.9731">create_directories()</text></g><path d="M185.13,591.8994 L460.7527,591.8994 A12.5,12.5 0 0 1 473.2527,604.3994 L473.2527,618.1963 L172.63,618.1963 L172.63,604.3994 A12.5,12.5 0 0 1 185.13,591.8994" fill="#FFFFFF"/><path d="M172.63,618.1963 L473.2527,618.1963 L473.2527,836.6963 A12.5,12.5 0 0 1 460.7527,849.1963 L185.13,849.1963 A12.5,12.5 0 0 1 172.63,836.6963 L172.63,618.1963" fill="#FFFFFF"/><rect fill="none" height="257.2969" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="300.6227" x="172.63" y="591.8994"/><line style="stroke:#000000;stroke-width:1;" x1="172.63" x2="473.2527" y1="618.1963" y2="618.1963"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="144.1904" x="250.8461" y="609.8945">CheckingDerivatives</text><ellipse cx="329.99" cy="639.1963" fill="#FFFFFF" rx="10" ry="10" style="stroke:#000000;stroke-width:1;"/><g><rect fill="#FFFFFF" height="50" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="84.7158" x="287.63" y="686.1963"/><line style="stroke:#000000;stroke-width:1;" x1="287.63" x2="372.3458" y1="712.4931" y2="712.4931"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="64.7158" x="297.63" y="704.1914">Checking</text></g><g><rect fill="#FFFFFF" height="50" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="142.7256" x="184.63" y="789.1963"/><line style="stroke:#000000;stroke-width:1;" x1="184.63" x2="327.3556" y1="815.4931" y2="815.4931"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="122.7256" x="194.63" y="807.1914">DerivativesFound</text></g><g><rect fill="#FFFFFF" height="50" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="118.5127" x="345.74" y="789.1963"/><line style="stroke:#000000;stroke-width:1;" x1="345.74" x2="464.2527" y1="815.4931" y2="815.4931"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="98.5127" x="355.74" y="807.1914">NoDerivatives</text></g><!--link *start*CheckingDerivatives to Checking--><g class="link" data-entity-1="ent0012" data-entity-2="ent0013" data-link-type="dependency" data-source-line="17" id="lnk14"><path d="M329.99,649.6363 C329.99,658.8963 329.99,667.3863 329.99,679.8763" fill="none" id="*start*CheckingDerivatives-to-Checking" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="329.99,685.8763,333.99,676.8763,329.99,680.8763,325.99,676.8763,329.99,685.8763" style="stroke:#000000;stroke-width:1;"/></g><!--link Checking to DerivativesFound--><g class="link" data-entity-1="ent0013" data-entity-2="ent0015" data-link-type="dependency" data-source-line="18" id="lnk16"><path d="M312.08,736.6463 C300.44,752.5262 288.885,768.2955 277.285,784.1355" fill="none" id="Checking-to-DerivativesFound" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="273.74,788.9762,282.2847,784.0784,276.6942,784.9423,275.8303,779.3518,273.74,788.9762" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="37.9463" x="298.42" y="767.2631">exists</text></g><!--link Checking to NoDerivatives--><g class="link" data-entity-1="ent0013" data-entity-2="ent0017" data-link-type="dependency" data-source-line="19" id="lnk18"><path d="M348.15,736.6463 C359.94,752.5262 371.6754,768.3173 383.4254,784.1573" fill="none" id="Checking-to-NoDerivatives" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="387,788.9762,384.8507,779.3648,384.0211,784.9605,378.4254,784.131,387,788.9762" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="62.6831" x="372.98" y="767.2631">not found</text></g><path d="M24.5,926.1994 L207.3909,926.1994 A12.5,12.5 0 0 1 219.8909,938.6994 L219.8909,952.4962 L12,952.4962 L12,938.6994 A12.5,12.5 0 0 1 24.5,926.1994" fill="#FFFFFF"/><path d="M12,952.4962 L219.8909,952.4962 L219.8909,1302.4063 A12.5,12.5 0 0 1 207.3909,1314.9063 L24.5,1314.9063 A12.5,12.5 0 0 1 12,1302.4063 L12,952.4962" fill="#FFFFFF"/><rect fill="none" height="388.7069" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="207.8909" x="12" y="926.1994"/><line style="stroke:#000000;stroke-width:1;" x1="12" x2="219.8909" y1="952.4962" y2="952.4962"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="98.5674" x="66.6618" y="944.1945">Preprocessing</text><g><rect fill="#FFFFFF" height="64.2344" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="131.8906" x="31.73" y="1020.4962"/><line style="stroke:#000000;stroke-width:1;" x1="31.73" x2="163.6206" y1="1046.7931" y2="1046.7931"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="111.8906" x="41.73" y="1038.4914">BIDSConversion</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="46.4063" x="36.73" y="1062.9318">Step 01</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="87.2695" x="36.73" y="1076.9005">DICOM &#8594; BIDS</text></g><g><rect fill="#FFFFFF" height="92.1719" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="147.3594" x="24" y="1137.7363"/><line style="stroke:#000000;stroke-width:1;" x1="24" x2="171.3594" y1="1164.0331" y2="1164.0331"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.5586" x="37.4004" y="1155.7314">fMRIPrepRunning</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="46.4063" x="29" y="1180.1718">Step 02</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="125.2148" x="29" y="1194.1405">Singularity container</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="105.2695" x="29" y="1208.1093">Motion correction</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="127.3594" x="29" y="1222.078">Spatial normalization</text></g><ellipse cx="97.68" cy="973.4962" fill="#FFFFFF" rx="10" ry="10" style="stroke:#000000;stroke-width:1;"/><ellipse cx="97.68" cy="1293.9063" fill="none" rx="11" ry="11" style="stroke:#000000;stroke-width:1;"/><ellipse cx="97.68" cy="1293.9063" fill="#FFFFFF" rx="6" ry="6" style="stroke:#000000;stroke-width:1;"/><!--link *start*Preprocessing to BIDSConversion--><g class="link" data-entity-1="ent0021" data-entity-2="ent0005" data-link-type="dependency" data-source-line="26" id="lnk22"><path d="M97.68,983.9563 C97.68,992.9663 97.68,1001.0463 97.68,1014.0263" fill="none" id="*start*Preprocessing-to-BIDSConversion" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="97.68,1020.0263,101.68,1011.0263,97.68,1015.0263,93.68,1011.0263,97.68,1020.0263" style="stroke:#000000;stroke-width:1;"/></g><!--link BIDSConversion to fMRIPrepRunning--><g class="link" data-entity-1="ent0005" data-entity-2="ent0006" data-link-type="dependency" data-source-line="30" id="lnk23"><path d="M97.68,1085.2263 C97.68,1100.9163 97.68,1114.1463 97.68,1131.3863" fill="none" id="BIDSConversion-to-fMRIPrepRunning" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="97.68,1137.3863,101.68,1128.3863,97.68,1132.3863,93.68,1128.3863,97.68,1137.3863" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.2109" x="98.68" y="1115.8031">submit to SLURM</text></g><!--link fMRIPrepRunning to *end*Preprocessing--><g class="link" data-entity-1="ent0006" data-entity-2="ent0024" data-link-type="dependency" data-source-line="36" id="lnk25"><path d="M97.68,1230.3463 C97.68,1249.7263 97.68,1264.6163 97.68,1276.6863" fill="none" id="fMRIPrepRunning-to-*end*Preprocessing" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="97.68,1282.6863,101.68,1273.6863,97.68,1277.6863,93.68,1273.6863,97.68,1282.6863" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="60.7217" x="98.68" y="1260.9731">complete</text></g><path d="M216.59,1375.9094 L429.3087,1375.9094 A12.5,12.5 0 0 1 441.8087,1388.4094 L441.8087,1402.2063 L204.09,1402.2063 L204.09,1388.4094 A12.5,12.5 0 0 1 216.59,1375.9094" fill="#FFFFFF"/><path d="M204.09,1402.2063 L441.8087,1402.2063 L441.8087,1780.0462 A12.5,12.5 0 0 1 429.3087,1792.5462 L216.59,1792.5462 A12.5,12.5 0 0 1 204.09,1780.0462 L204.09,1402.2063" fill="#FFFFFF"/><rect fill="none" height="416.6369" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="237.7187" x="204.09" y="1375.9094"/><line style="stroke:#000000;stroke-width:1;" x1="204.09" x2="441.8087" y1="1402.2063" y2="1402.2063"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="118.3164" x="263.7912" y="1393.9045">SignalProcessing</text><g><rect fill="#FFFFFF" height="92.1719" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="144.5703" x="216.09" y="1470.2063"/><line style="stroke:#000000;stroke-width:1;" x1="216.09" x2="360.6603" y1="1496.5031" y2="1496.5031"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69.665" x="253.5426" y="1488.2014">Denoising</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="46.4063" x="221.09" y="1512.6418">Step 03</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="124.5703" x="221.09" y="1526.6105">Confound regression</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="108.5684" x="221.09" y="1540.5793">Bandpass filtering</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="103.6758" x="221.09" y="1554.548">Motion scrubbing</text></g><g><rect fill="#FFFFFF" height="92.1719" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="126.4238" x="225.16" y="1615.3763"/><line style="stroke:#000000;stroke-width:1;" x1="225.16" x2="351.5838" y1="1641.6731" y2="1641.6731"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="96.3457" x="240.1991" y="1633.3714">ROIExtraction</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="46.4063" x="230.16" y="1657.8118">Step 04</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="77.8711" x="230.16" y="1671.7805">Atlas loading</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="99.4629" x="230.16" y="1685.7493">Space validation</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="106.4238" x="230.16" y="1699.718">NiftiLabelsMasker</text></g><ellipse cx="288.38" cy="1423.2063" fill="#FFFFFF" rx="10" ry="10" style="stroke:#000000;stroke-width:1;"/><ellipse cx="288.38" cy="1771.5462" fill="none" rx="11" ry="11" style="stroke:#000000;stroke-width:1;"/><ellipse cx="288.38" cy="1771.5462" fill="#FFFFFF" rx="6" ry="6" style="stroke:#000000;stroke-width:1;"/><!--link *start*SignalProcessing to Denoising--><g class="link" data-entity-1="ent0027" data-entity-2="ent0008" data-link-type="dependency" data-source-line="42" id="lnk28"><path d="M288.38,1433.6062 C288.38,1442.4263 288.38,1450.2862 288.38,1464.1062" fill="none" id="*start*SignalProcessing-to-Denoising" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="288.38,1470.1062,292.38,1461.1062,288.38,1465.1062,284.38,1461.1062,288.38,1470.1062" style="stroke:#000000;stroke-width:1;"/></g><!--link Denoising to ROIExtraction--><g class="link" data-entity-1="ent0008" data-entity-2="ent0009" data-link-type="dependency" data-source-line="48" id="lnk29"><path d="M288.38,1562.5862 C288.38,1579.3062 288.38,1592.2363 288.38,1608.9663" fill="none" id="Denoising-to-ROIExtraction" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="288.38,1614.9663,292.38,1605.9663,288.38,1609.9663,284.38,1605.9663,288.38,1614.9663" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="142.4287" x="289.38" y="1593.4431">denoised BOLD saved</text></g><!--link ROIExtraction to *end*SignalProcessing--><g class="link" data-entity-1="ent0009" data-entity-2="ent0030" data-link-type="dependency" data-source-line="54" id="lnk31"><path d="M288.38,1707.9863 C288.38,1727.3662 288.38,1742.2563 288.38,1754.3262" fill="none" id="ROIExtraction-to-*end*SignalProcessing" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="288.38,1760.3262,292.38,1751.3262,288.38,1755.3262,284.38,1751.3262,288.38,1760.3262" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="110.6841" x="289.38" y="1738.6131">timeseries saved</text></g><path d="M191.01,1853.5494 L454.8769,1853.5494 A12.5,12.5 0 0 1 467.3769,1866.0494 L467.3769,1879.8463 L178.51,1879.8463 L178.51,1866.0494 A12.5,12.5 0 0 1 191.01,1853.5494" fill="#FFFFFF"/><path d="M178.51,1879.8463 L467.3769,1879.8463 L467.3769,2408.6563 A12.5,12.5 0 0 1 454.8769,2421.1563 L191.01,2421.1563 A12.5,12.5 0 0 1 178.51,2408.6563 L178.51,1879.8463" fill="#FFFFFF"/><rect fill="none" height="567.6069" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="288.8669" x="178.51" y="1853.5494"/><line style="stroke:#000000;stroke-width:1;" x1="178.51" x2="467.3769" y1="1879.8463" y2="1879.8463"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="57.6816" x="294.1026" y="1871.5445">Analysis</text><g><rect fill="#FFFFFF" height="92.1719" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="198.3496" x="229.56" y="1946.8463"/><line style="stroke:#000000;stroke-width:1;" x1="229.56" x2="427.9096" y1="1973.1431" y2="1973.1431"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="178.3496" x="239.56" y="1964.8414">ConnectivityComputation</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="46.4063" x="234.56" y="1989.2818">Step 05</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="116.7832" x="234.56" y="2003.2505">Pearson correlation</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="109.8926" x="234.56" y="2017.2193">Fisher-z transform</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="77.959" x="234.56" y="2031.188">Thresholding</text></g><g><rect fill="#FFFFFF" height="92.1719" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="134.4453" x="190.51" y="2167.9963"/><line style="stroke:#000000;stroke-width:1;" x1="190.51" x2="324.9553" y1="2194.2931" y2="2194.2931"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="93.7617" x="210.8518" y="2185.9914">GraphMetrics</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="46.4063" x="195.51" y="2210.4318">Step 06</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="114.4453" x="195.51" y="2224.4005">27+ global metrics</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="93.4102" x="195.51" y="2238.3693">6 nodal metrics</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="101.2207" x="195.51" y="2252.338">JSON/CSV output</text></g><g><rect fill="#FFFFFF" height="106.1406" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="115.2969" x="343.08" y="2161.0163"/><line style="stroke:#000000;stroke-width:1;" x1="343.08" x2="458.3769" y1="2187.3131" y2="2187.3131"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.7373" x="356.3598" y="2179.0114">Visualization</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="46.4063" x="348.08" y="2203.4518">Step 07</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="84.4688" x="348.08" y="2217.4205">Atlas overlays</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="61.377" x="348.08" y="2231.3893">Heatmaps</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="95.2969" x="348.08" y="2245.358">Network graphs</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="74.1211" x="348.08" y="2259.3268">HTML report</text></g><ellipse cx="328.73" cy="1900.8463" fill="#FFFFFF" rx="10" ry="10" style="stroke:#000000;stroke-width:1;"/><g><rect fill="#FFFFFF" height="50" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="56.2646" x="300.6" y="2075.0163"/><line style="stroke:#000000;stroke-width:1;" x1="300.6" x2="356.8646" y1="2101.3131" y2="2101.3131"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36.2646" x="310.6" y="2093.0114">fork1</text></g><g><rect fill="#FFFFFF" height="50" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="54.125" x="301.67" y="2303.1563"/><line style="stroke:#000000;stroke-width:1;" x1="301.67" x2="355.795" y1="2329.4531" y2="2329.4531"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="34.125" x="311.67" y="2321.1514">join1</text></g><ellipse cx="328.73" cy="2400.1563" fill="none" rx="11" ry="11" style="stroke:#000000;stroke-width:1;"/><ellipse cx="328.73" cy="2400.1563" fill="#FFFFFF" rx="6" ry="6" style="stroke:#000000;stroke-width:1;"/><!--link *start*Analysis to ConnectivityComputation--><g class="link" data-entity-1="ent0033" data-entity-2="ent0011" data-link-type="dependency" data-source-line="60" id="lnk34"><path d="M328.73,1911.1463 C328.73,1919.6863 328.73,1927.0163 328.73,1940.3963" fill="none" id="*start*Analysis-to-ConnectivityComputation" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="328.73,1946.3963,332.73,1937.3963,328.73,1941.3963,324.73,1937.3963,328.73,1946.3963" style="stroke:#000000;stroke-width:1;"/></g><!--link ConnectivityComputation to fork1--><g class="link" data-entity-1="ent0011" data-entity-2="ent0035" data-link-type="dependency" data-source-line="66" id="lnk36"><path d="M328.73,2039.4063 C328.73,2051.5063 328.73,2058.1063 328.73,2068.5863" fill="none" id="ConnectivityComputation-to-fork1" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="328.73,2074.5863,332.73,2065.5863,328.73,2069.5863,324.73,2065.5863,328.73,2074.5863" style="stroke:#000000;stroke-width:1;"/></g><!--link fork1 to GraphMetrics--><g class="link" data-entity-1="ent0035" data-entity-2="ent0012" data-link-type="dependency" data-source-line="68" id="lnk37"><path d="M313.33,2125.3363 C305.5,2137.6963 298.9308,2148.0577 289.7708,2162.5177" fill="none" id="fork1-to-GraphMetrics" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="286.56,2167.5863,294.7553,2162.1239,289.2357,2163.3624,287.9972,2157.8428,286.56,2167.5863" style="stroke:#000000;stroke-width:1;"/></g><!--link fork1 to Visualization--><g class="link" data-entity-1="ent0035" data-entity-2="ent0013" data-link-type="dependency" data-source-line="69" id="lnk38"><path d="M344.36,2125.3363 C351.06,2135.7663 355.9161,2143.3288 363.8661,2155.6988" fill="none" id="fork1-to-Visualization" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="367.11,2160.7463,365.6091,2151.0124,364.4067,2156.54,358.8791,2155.3377,367.11,2160.7463" style="stroke:#000000;stroke-width:1;"/></g><!--link GraphMetrics to join1--><g class="link" data-entity-1="ent0012" data-entity-2="ent0039" data-link-type="dependency" data-source-line="82" id="lnk40"><path d="M286.61,2260.6663 C295.75,2275.0963 302.2794,2285.4075 310.0894,2297.7375" fill="none" id="GraphMetrics-to-join1" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="313.3,2302.8063,311.8632,2293.0628,310.6245,2298.5823,305.1049,2297.3436,313.3,2302.8063" style="stroke:#000000;stroke-width:1;"/></g><!--link Visualization to join1--><g class="link" data-entity-1="ent0013" data-entity-2="ent0039" data-link-type="dependency" data-source-line="83" id="lnk41"><path d="M367.05,2267.5163 C359.15,2279.8163 354.3336,2287.3085 347.6636,2297.6885" fill="none" id="Visualization-to-join1" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="344.42,2302.7363,352.6505,2297.3271,347.123,2298.5298,345.9202,2293.0023,344.42,2302.7363" style="stroke:#000000;stroke-width:1;"/></g><!--link join1 to *end*Analysis--><g class="link" data-entity-1="ent0039" data-entity-2="ent0042" data-link-type="dependency" data-source-line="85" id="lnk43"><path d="M328.73,2353.6363 C328.73,2365.6263 328.73,2373.4263 328.73,2382.6563" fill="none" id="join1-to-*end*Analysis" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="328.73,2388.6563,332.73,2379.6563,328.73,2383.6563,324.73,2379.6563,328.73,2388.6563" style="stroke:#000000;stroke-width:1;"/></g><path d="M250.81,2482.1494 L395.0834,2482.1494 A12.5,12.5 0 0 1 407.5834,2494.6494 L407.5834,2508.4463 L238.31,2508.4463 L238.31,2494.6494 A12.5,12.5 0 0 1 250.81,2482.1494" fill="#FFFFFF"/><path d="M238.31,2508.4463 L407.5834,2508.4463 L407.5834,2679.0869 A12.5,12.5 0 0 1 395.0834,2691.5869 L250.81,2691.5869 A12.5,12.5 0 0 1 238.31,2679.0869 L238.31,2508.4463" fill="#FFFFFF"/><rect fill="none" height="209.4375" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="169.2734" x="238.31" y="2482.1494"/><line style="stroke:#000000;stroke-width:1;" x1="238.31" x2="407.5834" y1="2508.4463" y2="2508.4463"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="76.3574" x="284.768" y="2500.1445">Completed</text><g><rect fill="#FFFFFF" height="106.1406" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="148.2734" x="250.31" y="2575.4463"/><line style="stroke:#000000;stroke-width:1;" x1="250.31" x2="398.5834" y1="2601.7431" y2="2601.7431"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="100.0166" x="274.4384" y="2593.4414">OutputsReady</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="118.125" x="255.31" y="2617.8818">Connectivity matrix</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="128.2734" x="255.31" y="2631.8505">Graph metrics (JSON)</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="120.7148" x="255.31" y="2645.8193">Nodal metrics (CSV)</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="103.957" x="255.31" y="2659.788">QC images (PNG)</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="74.1211" x="255.31" y="2673.7568">HTML report</text></g><ellipse cx="324.45" cy="2529.4463" fill="#FFFFFF" rx="10" ry="10" style="stroke:#000000;stroke-width:1;"/><!--link *start*Completed to OutputsReady--><g class="link" data-entity-1="ent0045" data-entity-2="ent0015" data-link-type="dependency" data-source-line="91" id="lnk46"><path d="M324.45,2539.7563 C324.45,2548.1963 324.45,2555.3763 324.45,2568.9863" fill="none" id="*start*Completed-to-OutputsReady" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="324.45,2574.9863,328.45,2565.9863,324.45,2569.9863,320.45,2565.9863,324.45,2574.9863" style="stroke:#000000;stroke-width:1;"/></g><ellipse cx="322.95" cy="67.6094" fill="#FFFFFF" rx="10" ry="10" style="stroke:#000000;stroke-width:1;"/><ellipse cx="322.95" cy="2763.5894" fill="none" rx="11" ry="11" style="stroke:#000000;stroke-width:1;"/><ellipse cx="322.95" cy="2763.5894" fill="#FFFFFF" rx="6" ry="6" style="stroke:#000000;stroke-width:1;"/><g class="entity" data-qualified-name="GMN2" data-source-line="102" id="ent0003"><path d="M255,1100.4194 L255,1116.5594 L219.93,1120.5594 L255,1124.5594 L255,1140.685 A0,0 0 0 0 255,1140.685 L460.9009,1140.685 A0,0 0 0 0 460.9009,1140.685 L460.9009,1110.4194 L450.9009,1100.4194 L255,1100.4194 A0,0 0 0 0 255,1100.4194" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M450.9009,1100.4194 L450.9009,1110.4194 L460.9009,1110.4194 L450.9009,1100.4194" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.46" x="261" y="1117.4863">SLURM Job Dependencies:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="184.9009" x="261" y="1132.6191">Step 02 depends on Step 01</text></g><g class="entity" data-qualified-name="GMN5" data-source-line="107" id="ent0006"><path d="M477,1556.5294 L477,1580.2294 L442.16,1584.2294 L477,1588.2294 L477,1611.9278 A0,0 0 0 0 477,1611.9278 L682.9009,1611.9278 A0,0 0 0 0 682.9009,1611.9278 L682.9009,1566.5294 L672.9009,1556.5294 L477,1556.5294 A0,0 0 0 0 477,1556.5294" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M672.9009,1556.5294 L672.9009,1566.5294 L682.9009,1566.5294 L672.9009,1556.5294" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.46" x="483" y="1573.5963">SLURM Job Dependencies:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="184.9009" x="483" y="1588.7291">Step 03 depends on Step 02</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="184.9009" x="483" y="1603.8619">Step 04 depends on Step 03</text></g><g class="entity" data-qualified-name="GMN8" data-source-line="113" id="ent0009"><path d="M502.66,2109.6494 L502.66,2133.3494 L467.68,2137.3494 L502.66,2141.3494 L502.66,2165.0478 A0,0 0 0 0 502.66,2165.0478 L695.2371,2165.0478 A0,0 0 0 0 695.2371,2165.0478 L695.2371,2119.6494 L685.2371,2109.6494 L502.66,2109.6494 A0,0 0 0 0 502.66,2109.6494" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M685.2371,2109.6494 L685.2371,2119.6494 L695.2371,2119.6494 L685.2371,2109.6494" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.6563" x="508.66" y="2126.7163">Parallel Execution:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145.4312" x="508.66" y="2141.8491">Steps 06 &amp; 07 can run</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="171.5771" x="508.66" y="2156.9819">concurrently after Step 05</text></g><!--link *start* to Initialized--><g class="link" data-entity-1="ent0002" data-entity-2="ent0002" data-link-type="dependency" data-source-line="6" id="lnk3"><path d="M322.95,78.0394 C322.95,92.2494 322.95,115.0494 322.95,148.3694" fill="none" id="*start*-to-Initialized" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="322.95,154.3694,326.95,145.3694,322.95,149.3694,318.95,145.3694,322.95,154.3694" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.208" x="323.95" y="120.6763">load_config()</text></g><!--link Initialized to CheckingDerivatives--><g class="link" data-entity-1="ent0002" data-entity-2="ent0003" data-link-type="dependency" data-source-line="14" id="lnk11"><path d="M322.95,515.2894 C322.95,541.0494 322.95,561.0994 322.95,585.5794" fill="none" id="Initialized-to-CheckingDerivatives" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="322.95,591.5794,326.95,582.5794,322.95,586.5794,318.95,582.5794,322.95,591.5794" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="189.2871" x="323.95" y="557.9663">check_fmriprep_derivatives()</text></g><!--link CheckingDerivatives to Preprocessing--><g class="link" data-entity-1="ent0003" data-entity-2="ent0004" data-link-type="dependency" data-source-line="22" id="lnk19"><path d="M256.31,849.6694 C243.66,873.9894 232.9387,894.6064 219.5087,920.4264" fill="none" id="CheckingDerivatives-to-Preprocessing" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="216.74,925.7494,224.4417,919.6107,219.0473,921.3135,217.3444,915.9191,216.74,925.7494" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.3647" x="238.99" y="892.2663">no derivatives</text></g><!--link CheckingDerivatives to SignalProcessing--><g class="link" data-entity-1="ent0003" data-entity-2="ent0007" data-link-type="dependency" data-source-line="23" id="lnk20"><path d="M438.97,849.4494 C454.96,873.4694 468.97,899.4794 477.95,926.1994 C532.96,1089.9694 522.68,1148.0394 477.95,1314.9094 C469.69,1345.6994 459.6506,1371.2465 444.9406,1400.5665" fill="none" id="CheckingDerivatives-to-SignalProcessing" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="442.25,1405.9294,449.8612,1399.6788,444.4922,1401.4603,442.7106,1396.0913,442.25,1405.9294" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.3452" x="516.45" y="1125.1263">derivatives exist</text></g><!--link Preprocessing to SignalProcessing--><g class="link" data-entity-1="ent0004" data-entity-2="ent0007" data-link-type="dependency" data-source-line="39" id="lnk26"><path d="M202.83,1315.3394 C211.74,1335.1994 218.3557,1349.9643 227.3257,1369.9743" fill="none" id="Preprocessing-to-SignalProcessing" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="229.78,1375.4494,229.7485,1365.6006,227.7347,1370.8868,222.4485,1368.873,229.78,1375.4494" style="stroke:#000000;stroke-width:1;"/></g><!--link SignalProcessing to Analysis--><g class="link" data-entity-1="ent0007" data-entity-2="ent0010" data-link-type="dependency" data-source-line="57" id="lnk32"><path d="M322.95,1792.7994 C322.95,1812.6294 322.95,1826.9694 322.95,1847.3494" fill="none" id="SignalProcessing-to-Analysis" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="322.95,1853.3494,326.95,1844.3494,322.95,1848.3494,318.95,1844.3494,322.95,1853.3494" style="stroke:#000000;stroke-width:1;"/></g><!--link Analysis to Completed--><g class="link" data-entity-1="ent0010" data-entity-2="ent0014" data-link-type="dependency" data-source-line="88" id="lnk44"><path d="M322.95,2421.4494 C322.95,2442.6494 322.95,2457.0794 322.95,2475.9094" fill="none" id="Analysis-to-Completed" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="322.95,2481.9094,326.95,2472.9094,322.95,2476.9094,318.95,2472.9094,322.95,2481.9094" style="stroke:#000000;stroke-width:1;"/></g><!--link Completed to *end*--><g class="link" data-entity-1="ent0014" data-entity-2="ent0047" data-link-type="dependency" data-source-line="99" id="lnk48"><path d="M322.95,2692.0294 C322.95,2716.8794 322.95,2733.8394 322.95,2746.4594" fill="none" id="Completed-to-*end*" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="322.95,2752.4594,326.95,2743.4594,322.95,2747.4594,318.95,2743.4594,322.95,2752.4594" style="stroke:#000000;stroke-width:1;"/></g><?plantuml-src ZLRRZjis47tNLqnHeDYqMBJPJHCW21R8shkf0zzgftaf2eEMnZAx52cGbBDEqTTyG3wnNz8Pof8bI-xMVf35EJESovaPV-Etc27aIaWTkGUfSs551ciHFwJM53eP66KiV7j_nzyeyj8hXCraCOAvp559ZN09IoyymaJ4MtgFej-__mCkBszWfAMNGidFcC1hK4OagzZeZKmldaMH2pfDo5yHqATI7WJac9Gm2OBcGK2CJPfAdIxH5pdPT_nSgVAGRc2T5eHrXj9Yx8sLw0OMoGFsB0w_LibHHkf_Hr7JkU3I5cDAKJf4AtV2onqwrkRJrIQpChUOhvAZy1Xcd-P9k0T46UhXfNJvg7FF5Q4hyL4wxxhGgMcxfes73UjmD7q-iDASlBOcHkVO32j18uQpQakPQg7cJSs6MkbY5NxxYdRWjwFXaagxG-kaqK7KFYB3Iuyv_FIyNpWS3MOJ-EVBro2A-a1y3tEM_LWKMfVkkcATIG_Um7Byss8I5BkeykwhSr9w54fOwVT0tFRKHcZFO2V6ipEniSopAjWUcxbWsb4XRCRi4m7R2-R0E974GfFb2ZrofTlfxYjMLPXE4Tkr6Q8sqbMihD_gh5ntphb90qajffPj7g9iOcw5JdBX76oayaIP7lE7LBdO5kjryBUDOESMiz7TexSYf3AmZwNKghUpyH2Ss1tcnYckTFr5h-ojLyA5ILLvrT7EHOomexeaegxXAMWgDrwEnHgLcmZtG8peWHrhvsM63ddk7Doc6dOgm_2tTBHtqbNbgzwxerCpmtR4oW7nel17Ly_8whpy_0HgZiAwYiNg_zYzbswBzl8pKEJQROZKJoXys19pjaObTU7FOKDV6_lm7DwyuUVDpQ5DmXbBtrcHRoVehOpTYUYZTCL9UpNHTKPUzeckNlq0gJ9hQjEiOVq4zP9wEFbloFlbRFhZOFaHJE4fhjAFbckr8wzwPILb3Oqw9VQk5_8BhRTCvFt2AVfFb1D8sQyp-XycOshet5ZVaoVEvPz6QYu2Fwa8NICrg3HGuWyTm7IlcLpojvnbIRq-guCJeiz2pjm2HR8FWkP1EOrgta0coD_7FbW8foeIN719dlNXfirYmWLLhHVswm1a9bBgvelvz5qlf9bHNirrV5LA8bhT25QcMmzcqrwWP30iB7XlrZGJSzGq-cAQ7gzPKguhcePyJiJGzVQaT_v7WAV6EylXQVlNNVjNjV15LtXzzl9wf07CwQ-dKgZWxX7ZWcbJNUYe2-4xwW28XGPRyCYXRHiND8EqLtiG6reazGIhxleN?></g></svg>